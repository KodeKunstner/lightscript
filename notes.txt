---------------------------------------------------------------------
code compression via superinstructions in vm


> Yesterday, I was at the speciale defense of another student.  The lesson I
> would take away from it is that it is very important to know the related
> work, both how it works and how it relates to your work.  Because the
> censor probably knows a lot more about the related work than he does about
> your work, and so it is easy for him to ask questions about that.

------------------------------
Idea:
generalised virtual machine

inteface function {
    apply(vm);
}

InterpretedFunction: {
    Function ops[256];
    Byte[] code;
    Object[] closure;
    apply(vm) {
        vm.call(this);
    }
}

Continuation: {
    Int pc;
    Stack stack;
    Function fn;

    fromFn(fn, cont) {
        Stack.empty();
        this.fn = fn;
        pc = 0;
    }

    function interpret(fn) {
        byte[] code = fn.code;
	function[] ops = fn.ops;
	size = code.length;
	while(pc<size) {
	    ops[code[pc]].apply(this);
	    pc++;
	}
    }
}
